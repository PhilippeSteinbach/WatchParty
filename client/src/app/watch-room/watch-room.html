<div class="watch-room">
  <header class="toolbar">
    <div class="room-info">
      <span class="room-label">Room:</span>
      <span class="room-code">{{ roomCode() }}</span>
      <button class="copy-btn" (click)="copyLink()">
        {{ linkCopied() ? 'âœ“ Copied' : 'ðŸ“‹ Copy Link' }}
      </button>
      <button class="sync-btn" (click)="requestSync()">ðŸ”„ Sync</button>
    </div>

    <form class="video-form" (ngSubmit)="changeVideo()">
      <input
        type="text"
        placeholder="Paste YouTube URLâ€¦"
        [ngModel]="videoUrlInput()"
        (ngModelChange)="videoUrlInput.set($event)"
        name="videoUrl"
      />
      <button type="submit">Load</button>
    </form>
  </header>

  <div class="main-content">
    <div class="player-area">
      <app-youtube-player
        [videoUrl]="currentVideoUrl"
        [isPlaying]="isPlaying"
        [currentTime]="currentTime"
        [canControl]="true"
        (playerEvent)="onPlayerEvent($event)"
      />
    </div>

    <aside class="sidebar">
      <app-participant-list [participants]="participants()" />
      <div class="tab-bar">
        <button
          class="tab-btn"
          [class.active]="activeTab() === 'chat'"
          (click)="activeTab.set('chat')"
        >
          Chat
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab() === 'playlist'"
          (click)="activeTab.set('playlist')"
        >
          Playlist
        </button>
      </div>
      @if (activeTab() === 'chat') {
        <app-chat-panel />
      } @else {
        <app-playlist-panel />
      }
    </aside>
  </div>
</div>
