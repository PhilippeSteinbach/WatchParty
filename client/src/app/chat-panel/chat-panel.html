<div class="flex flex-col h-full bg-surface-2">
  <h3 class="text-xs uppercase tracking-wider text-purple-400/50 px-4 py-3 border-b border-border m-0">Chat</h3>

  <div class="messages flex-1 overflow-y-auto p-3 flex flex-col gap-2" #scrollContainer>
    @for (msg of messages(); track msg.id) {
      <app-chat-message
        [message]="msg"
        (reactionSelected)="onReaction($event)"
      />
    } @empty {
      <div class="text-purple-400/30 text-sm text-center py-8">No messages yet. Say hi! ðŸ‘‹</div>
    }
  </div>

  <div class="flex gap-1 px-3 py-2 border-t border-border">
    @for (emoji of emojis; track emoji) {
      <button
        type="button"
        class="bg-surface-4 hover:bg-neon-purple/20 rounded px-1.5 py-0.5 text-sm transition-colors border-none cursor-pointer"
        (click)="insertEmoji(emoji)"
        [attr.aria-label]="'Insert ' + emoji"
      >
        {{ emoji }}
      </button>
    }
  </div>

  <form class="flex gap-2 p-3 border-t border-border" (ngSubmit)="sendMessage()">
    <input
      type="text"
      class="input-dark flex-1 text-sm"
      placeholder="Type a messageâ€¦"
      [ngModel]="messageInput()"
      (ngModelChange)="messageInput.set($event)"
      name="chatMessage"
      [maxlength]="MAX_LENGTH"
      aria-label="Chat message"
    />
    <button
      type="submit"
      class="btn-gradient px-4 py-2 text-sm"
      [disabled]="!messageInput().trim()"
      aria-label="Send message"
    >
      <lucide-icon [img]="SendIcon" [size]="14"></lucide-icon>
    </button>
  </form>
</div>
